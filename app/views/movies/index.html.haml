.page-header
	%h1= link_to "All Movies (Click to Reset)", movies_path({:nuke=>"nuke"})

%table#filters.table
	%thead
		%tr
			%th Ratings
			%th Locations
			%th Qualities
			%th
	%tbody
		= form_tag movies_path, :method => :get, :id => 'filters_form' do
			%tr
				%th
					- @all_ratings.each do |rating|
						= rating
						= check_box_tag "ratings[#{rating}]", 1,
							@selected_ratings.include?(rating)
				%th
					- @all_locations.each do |location|
						= location
						= check_box_tag "locations[#{location}]", 1,
						 	@selected_locations.include?(location)
				%th
					- @all_qualities.each do |quality|
						= quality
						= check_box_tag "qualities[#{quality}]", 1,
							@selected_qualities.include?(quality)
				%th
					= text_field_tag 'search', @search, :class => 'input-medium search-query', :placeholder => 'Do I Have This Potato?'
					= submit_tag 'Filter', :id => 'filters_submit', :class => "btn btn-inverse"

%table#movies.table.table-bordered.table-condensed
	%thead
		%tr
			%th{:class => @title_header}= link_to 'Title', movies_path(:sort => 'title',
																				:ratings => @selected_ratings,
																				:locations => @selected_locations,
																				:qualities => @selected_qualities)
			%th Director
			%th Rating
			%th Location
			%th Quality
			%th{:class => @release_header}= link_to 'Release Date', movies_path(:sort => 'release_date',
																																					:ratings => @selected_ratings,
																																					:locations => @selected_locations,
																																					:qualities => @selected_qualities)
	%tbody
		- @movies.each do |movie|
			%tr
				%td= link_to "#{movie.title}", movie_path(movie)
				%td= movie.director
				%td= movie.rating
				%td= movie.location
				%td{ :id => @hilite }= movie.quality
				%td= movie.release_date.strftime("%F")

= button_to 'Add new movie', new_movie_path, :method => :get, :class => "btn btn-inverse"